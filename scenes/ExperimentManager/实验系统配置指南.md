# å®éªŒé€‰æ‹©ç³»ç»Ÿ - å®Œæ•´é…ç½®æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

å®éªŒé€‰æ‹©ç³»ç»Ÿå…è®¸ç©å®¶é€šè¿‡æŒ‰Pé”®æ‰“å¼€èœå•ï¼Œé€‰æ‹©ä¸åŒç±»å‹çš„å®éªŒå¹¶ç›´æ¥ä¼ é€åˆ°å®éªŒä½ç½®ã€‚

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶
1. **ExperimentManager.cs** - å®éªŒç®¡ç†å™¨
2. **ExperimentInfo.cs** - å®éªŒä¿¡æ¯èµ„æºï¼ˆå†…ç½®åœ¨ExperimentManager.csä¸­ï¼‰
3. **AluminumReactionExperiment.cs** - é“å’Œæ°¢æ°§åŒ–é’ ååº”å®éªŒ
4. **OhmsLawExperiment.cs** - æ¬§å§†å®šå¾‹å®éªŒ
5. **FrictionExperiment.cs** - æ‘©æ“¦åŠ›å®éªŒï¼ˆå·²å­˜åœ¨ï¼‰

## ğŸš€ å¿«é€Ÿé…ç½®

### æ­¥éª¤1ï¼šæ·»åŠ è¾“å…¥æ˜ å°„

æ‰“å¼€ `é¡¹ç›® -> é¡¹ç›®è®¾ç½® -> è¾“å…¥æ˜ å°„`ï¼Œæ·»åŠ æ–°çš„åŠ¨ä½œï¼š

**åŠ¨ä½œåç§°**: `toggle_experiment_menu`
**æŒ‰é”®**: Pé”®ï¼ˆKey.Pï¼‰

æˆ–è€…åœ¨ `project.godot` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```
[input]

toggle_experiment_menu={
"deadzone": 0.5,
"events": [Object(InputEventKey,"resource_local_to_scene":false,"resource_name":"","device":0,"window_id":0,"alt_pressed":false,"shift_pressed":false,"ctrl_pressed":false,"meta_pressed":false,"pressed":false,"keycode":80,"physical_keycode":0,"key_label":0,"unicode":0,"echo":false,"script":null)
]
}
```

### æ­¥éª¤2ï¼šåœ¨åœºæ™¯ä¸­æ·»åŠ ExperimentManager

åœ¨ `World.tscn` ä¸­æ·»åŠ ï¼š

```
World (Node3D)
â”œâ”€â”€ ExperimentManager (Node)
â”‚   â””â”€â”€ Script: ExperimentManager.cs
â”œâ”€â”€ Player
â”œâ”€â”€ Labs
â”‚   â”œâ”€â”€ LabItem_Friction (FrictionExperiment.cs)
â”‚   â”œâ”€â”€ LabItem_Aluminum (AluminumReactionExperiment.cs)
â”‚   â””â”€â”€ LabItem_Ohms (OhmsLawExperiment.cs)
â””â”€â”€ ...
```

### æ­¥éª¤3ï¼šé…ç½®å®éªŒä¿¡æ¯

é€‰æ‹©ExperimentManagerèŠ‚ç‚¹ï¼Œåœ¨Inspectorä¸­é…ç½®ï¼š

#### Player Path
è®¾ç½®ç©å®¶èŠ‚ç‚¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š`../Player`

#### Experimentsæ•°ç»„
æ·»åŠ 3ä¸ªExperimentInfoèµ„æºï¼š

**å®éªŒ1 - æ‘©æ“¦åŠ›å®éªŒ**
- Experiment Name: "æ‘©æ“¦åŠ›å®éªŒ"
- Description: "æ¢ç©¶æ»‘åŠ¨æ‘©æ“¦åŠ›çš„å½±å“å› ç´ "
- Category: Mechanics (åŠ›å­¦ç‰©ç†)
- Position: Vector3(0.136, 0.5, -4.557)  // LabItem_Frictionçš„ä½ç½®
- Experiment Node Path: (å¯é€‰) `Labs/LabItem_Friction`

**å®éªŒ2 - é“ä¸æ°¢æ°§åŒ–é’ ååº”**
- Experiment Name: "é“ä¸æ°¢æ°§åŒ–é’ ååº”"
- Description: "è§‚å¯Ÿé‡‘å±é“ä¸ç¢±æº¶æ¶²çš„ååº”"
- Category: Chemistry (åŒ–å­¦å®éªŒ)
- Position: Vector3(-5.0, 0.5, -4.0)  // è®¾ç½®ä½ æƒ³è¦çš„ä½ç½®
- Experiment Node Path: `Labs/LabItem_Aluminum`

**å®éªŒ3 - æ¬§å§†å®šå¾‹**
- Experiment Name: "æ¬§å§†å®šå¾‹å®éªŒ"
- Description: "æ¢ç©¶ç”µæµä¸ç”µå‹ã€ç”µé˜»çš„å…³ç³»"
- Category: Electricity (ç”µå­¦ç‰©ç†)
- Position: Vector3(5.0, 0.5, -4.0)  // è®¾ç½®ä½ æƒ³è¦çš„ä½ç½®
- Experiment Node Path: `Labs/LabItem_Ohms`

### æ­¥éª¤4ï¼šä¿®æ”¹LabItemèŠ‚ç‚¹è„šæœ¬

å°†ç°æœ‰çš„LabItemèŠ‚ç‚¹è„šæœ¬æ”¹ä¸ºå¯¹åº”çš„å®éªŒè„šæœ¬ï¼š

1. **æ‘©æ“¦åŠ›å®éªŒ**ï¼š
   - èŠ‚ç‚¹ï¼š`Labs/LabItem` (å·²å­˜åœ¨)
   - Script: æ”¹ä¸º `FrictionExperiment.cs`
   - Position: (0.136, 0.5, -4.557)

2. **é“ååº”å®éªŒ**ï¼š
   - åˆ›å»ºæ–°èŠ‚ç‚¹æˆ–å¤åˆ¶LabItem
   - èŠ‚ç‚¹åï¼š`LabItem_Aluminum`
   - Script: `AluminumReactionExperiment.cs`
   - Position: è®¾ç½®åœ¨åœºæ™¯ä¸­åˆé€‚çš„ä½ç½®

3. **æ¬§å§†å®šå¾‹å®éªŒ**ï¼š
   - åˆ›å»ºæ–°èŠ‚ç‚¹æˆ–å¤åˆ¶LabItem
   - èŠ‚ç‚¹åï¼š`LabItem_Ohms`
   - Script: `OhmsLawExperiment.cs`
   - Position: è®¾ç½®åœ¨åœºæ™¯ä¸­åˆé€‚çš„ä½ç½®

## ğŸ® ä½¿ç”¨æ–¹æ³•

### æ‰“å¼€å®éªŒèœå•
- **æŒ‰é”®**: Pé”®
- **æ•ˆæœ**: æ˜¾ç¤ºå®éªŒé€‰æ‹©èœå•ï¼Œé¼ æ ‡å˜ä¸ºå¯è§

### é€‰æ‹©å®éªŒ
1. åœ¨èœå•ä¸­ç‚¹å‡»æƒ³è¦çš„å®éªŒ
2. ç©å®¶è‡ªåŠ¨ä¼ é€åˆ°å®éªŒä½ç½®
3. èœå•è‡ªåŠ¨å…³é—­

### å…³é—­èœå•
- **æŒ‰é”®**: ESCæˆ–Pé”®
- **æ•ˆæœ**: å…³é—­èœå•ï¼Œæ¢å¤æ¸¸æˆ

## ğŸ“Š å®éªŒåˆ†ç±»

### åŠ›å­¦ç‰©ç† (Mechanics)
- æ‘©æ“¦åŠ›å®éªŒ
- å¯æ‰©å±•ï¼šé‡åŠ›åŠ é€Ÿåº¦ã€ç®€è°è¿åŠ¨ç­‰

### ç”µå­¦ç‰©ç† (Electricity)
- æ¬§å§†å®šå¾‹å®éªŒ
- å¯æ‰©å±•ï¼šä¸²å¹¶è”ç”µè·¯ã€ç”µåŠŸç‡ç­‰

### åŒ–å­¦å®éªŒ (Chemistry)
- é“ä¸æ°¢æ°§åŒ–é’ ååº”
- å¯æ‰©å±•ï¼šé…¸ç¢±ä¸­å’Œã€æ°§åŒ–è¿˜åŸç­‰

## ğŸ¨ UIç‰¹æ€§

### èœå•å¤–è§‚
- å±…ä¸­æ˜¾ç¤ºï¼Œ600x400å¤§å°
- æ”¯æŒæ»šåŠ¨æŸ¥çœ‹æ‰€æœ‰å®éªŒ
- åˆ†ç±»æ˜¾ç¤ºï¼Œä¸åŒé¢œè‰²åŒºåˆ†
- æ˜¾ç¤ºå®éªŒåç§°å’Œæè¿°

### äº¤äº’ç‰¹æ€§
- Pé”®å¿«é€Ÿåˆ‡æ¢
- ESCé”®å…³é—­èœå•
- ç‚¹å‡»å®éªŒæŒ‰é’®ä¼ é€
- é¼ æ ‡çŠ¶æ€è‡ªåŠ¨ç®¡ç†

## ğŸ“ World.tscnç¤ºä¾‹é…ç½®

åœ¨World.tscnä¸­æ·»åŠ ExperimentManagerèŠ‚ç‚¹åçš„é…ç½®ï¼š

```gdscript
[node name="ExperimentManager" type="Node" parent="." node_paths=PackedStringArray("PlayerPath")]
script = ExtResource("path_to_ExperimentManager.cs")
PlayerPath = NodePath("../Player")
Experiments = Array[ExtResource("ExperimentInfo")]([
    SubResource("ExperimentInfo_Friction"),
    SubResource("ExperimentInfo_Aluminum"),
    SubResource("ExperimentInfo_Ohms")
])

[sub_resource type="Resource" id="ExperimentInfo_Friction"]
script = ExtResource("path_to_ExperimentInfo")
ExperimentName = "æ‘©æ“¦åŠ›å®éªŒ"
Description = "æ¢ç©¶æ»‘åŠ¨æ‘©æ“¦åŠ›çš„å½±å“å› ç´ "
Category = 0  # Mechanics
Position = Vector3(0.136, 0.5, -4.557)

[sub_resource type="Resource" id="ExperimentInfo_Aluminum"]
script = ExtResource("path_to_ExperimentInfo")
ExperimentName = "é“ä¸æ°¢æ°§åŒ–é’ ååº”"
Description = "è§‚å¯Ÿé‡‘å±é“ä¸ç¢±æº¶æ¶²çš„ååº”"
Category = 2  # Chemistry
Position = Vector3(-5, 0.5, -4)

[sub_resource type="Resource" id="ExperimentInfo_Ohms"]
script = ExtResource("path_to_ExperimentInfo")
ExperimentName = "æ¬§å§†å®šå¾‹å®éªŒ"
Description = "æ¢ç©¶ç”µæµä¸ç”µå‹ã€ç”µé˜»çš„å…³ç³»"
Category = 1  # Electricity
Position = Vector3(5, 0.5, -4)
```

## ğŸ”§ é«˜çº§é…ç½®

### åŠ¨æ€æ·»åŠ å®éªŒ

å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ å®éªŒï¼š

```csharp
// è·å–ExperimentManager
var manager = GetNode<ExperimentManager>("/root/World/ExperimentManager");

// åˆ›å»ºæ–°å®éªŒä¿¡æ¯
var newExperiment = new ExperimentInfo {
    ExperimentName = "æ–°å®éªŒ",
    Description = "æè¿°",
    Category = ExperimentCategory.Mechanics,
    Position = new Vector3(0, 0, 0)
};

// æ³¨å†Œå®éªŒ
manager.RegisterExperiment(newExperiment);
```

### è‡ªå®šä¹‰èœå•æ ·å¼

å¯ä»¥ä¿®æ”¹ExperimentManager.csä¸­çš„CreateExperimentMenu()æ–¹æ³•æ¥è‡ªå®šä¹‰UIæ ·å¼ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¾“å…¥æ˜ å°„**: å¿…é¡»æ·»åŠ `toggle_experiment_menu`åŠ¨ä½œ
2. **Playerè·¯å¾„**: ç¡®ä¿PlayerPathæ­£ç¡®æŒ‡å‘ç©å®¶èŠ‚ç‚¹
3. **å®éªŒä½ç½®**: Positionéœ€è¦è®¾ç½®ä¸ºå®éªŒå°çš„å®é™…ä½ç½®
4. **è„šæœ¬å…³è”**: ç¡®ä¿LabItemèŠ‚ç‚¹ä½¿ç”¨æ­£ç¡®çš„å®éªŒè„šæœ¬

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: æŒ‰Pé”®æ²¡æœ‰ååº”
**è§£å†³**: æ£€æŸ¥è¾“å…¥æ˜ å°„æ˜¯å¦æ­£ç¡®æ·»åŠ `toggle_experiment_menu`

### é—®é¢˜2: èœå•æ‰“å¼€ä½†æ˜¯ç©ºçš„
**è§£å†³**: æ£€æŸ¥ExperimentManagerçš„Experimentsæ•°ç»„æ˜¯å¦é…ç½®

### é—®é¢˜3: ä¼ é€ä¸å·¥ä½œ
**è§£å†³**: 
- æ£€æŸ¥PlayerPathæ˜¯å¦æ­£ç¡®
- æ£€æŸ¥å®éªŒPositionæ˜¯å¦è®¾ç½®

### é—®é¢˜4: é€‰æ‹©å®éªŒåæ²¡æœ‰ä¼ é€
**è§£å†³**: ç¡®ä¿Positionä¸æ˜¯Vector3.Zero

## ğŸ“ˆ æ‰©å±•å»ºè®®

### æ·»åŠ æ–°å®éªŒ

1. åˆ›å»ºæ–°çš„å®éªŒè„šæœ¬ï¼ˆç»§æ‰¿è‡ªLabItemï¼‰
2. åœ¨åœºæ™¯ä¸­æ·»åŠ å¯¹åº”èŠ‚ç‚¹
3. åœ¨ExperimentManagerä¸­æ³¨å†Œå®éªŒä¿¡æ¯

### æ·»åŠ æ›´å¤šåˆ†ç±»

ä¿®æ”¹ExperimentCategoryæšä¸¾ï¼š
```csharp
public enum ExperimentCategory {
    Mechanics,
    Electricity,
    Chemistry,
    Optics,      // å…‰å­¦
    Thermology   // çƒ­å­¦
}
```

### æ·»åŠ å®éªŒé¢„è§ˆå›¾

å¯ä»¥åœ¨ExperimentInfoä¸­æ·»åŠ Texture2Då­—æ®µï¼Œåœ¨èœå•ä¸­æ˜¾ç¤ºé¢„è§ˆå›¾ã€‚

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æ·»åŠ äº†`toggle_experiment_menu`è¾“å…¥æ˜ å°„
- [ ] åœ¨Worldä¸­æ·»åŠ äº†ExperimentManagerèŠ‚ç‚¹
- [ ] é…ç½®äº†Player Path
- [ ] æ·»åŠ äº†è‡³å°‘ä¸€ä¸ªå®éªŒä¿¡æ¯
- [ ] è®¾ç½®äº†æ­£ç¡®çš„å®éªŒä½ç½®åæ ‡
- [ ] æµ‹è¯•ï¼šæŒ‰Pé”®å¯ä»¥æ‰“å¼€èœå•
- [ ] æµ‹è¯•ï¼šé€‰æ‹©å®éªŒå¯ä»¥ä¼ é€
- [ ] æµ‹è¯•ï¼šESCå¯ä»¥å…³é—­èœå•

## ğŸ“ å®éªŒå†…å®¹è¯´æ˜

### æ‘©æ“¦åŠ›å®éªŒ
- 8æ­¥å®Œæ•´æµç¨‹
- æ‹–æ‹½ç‰©å—äº¤äº’
- æ•°æ®è®°å½•å’Œåˆ†æ
- è‡ªåŠ¨ç”Ÿæˆç»“è®º

### é“ä¸æ°¢æ°§åŒ–é’ ååº”
- åŒ–å­¦ååº”æ¨¡æ‹Ÿ
- æ°”æ³¡æ•ˆæœ
- æ°”ä½“æ£€éªŒ
- ç°è±¡è§‚å¯Ÿè®°å½•

### æ¬§å§†å®šå¾‹å®éªŒ
- ç”µè·¯æ¨¡æ‹Ÿ
- å®æ—¶ç”µå‹ç”µæµæ˜¾ç¤º
- å¯è°ƒç”µé˜»
- æ•°æ®å›¾è¡¨åˆ†æ

---

**å¼€å§‹ä½¿ç”¨ä½ çš„è™šæ‹Ÿå®éªŒå®¤ç³»ç»Ÿï¼** ğŸ§ªâš¡ğŸ”¬

